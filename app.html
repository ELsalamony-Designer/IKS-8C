<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>IKS 8C</title>
  <style>
    body { font-family: Arial; margin:0; background:#f5f5f5;}
    header { background:#007bff; color:#fff; padding:10px; text-align:center;}
    nav { background:#eee; padding:10px; display:flex; flex-wrap:wrap;}
    nav button { margin:5px; padding:10px; border:none; border-radius:5px; cursor:pointer; }
    section { padding:20px;}
    #admin { background:#fff; padding:10px; border:1px solid #ccc; margin-top:20px;}
  </style>
  <script type="module">
    import { auth, db } from "./firebase.js";
    import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { ref, get } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    onAuthStateChanged(auth, user=>{
      if(!user){ location.href="login.html"; return; }
      document.getElementById("welcome").innerText = "Welcome "+(user.displayName || user.email);
      const uid = user.uid;
      get(ref(db,"users/"+uid)).then(snap=>{
        const data = snap.val();
        if(data && data.role==="admin"){
          document.getElementById("admin").style.display="block";
        }
      });
    });

    window.logout = ()=>signOut(auth).then(()=>location.href="login.html");
  </script>
</head>
<body>
  <header>
    <h2 id="welcome"></h2>
    <button onclick="logout()">Logout</button>
  </header>
  <nav>
    <button onclick="document.getElementById('content').innerText='Arabic Homework'">Arabic</button>
    <button onclick="document.getElementById('content').innerText='English Homework'">English</button>
    <button onclick="document.getElementById('content').innerText='English+ Homework'">English+</button>
    <button onclick="document.getElementById('content').innerText='ICT Homework'">ICT</button>
    <button onclick="document.getElementById('content').innerText='Science Homework'">Science</button>
    <button onclick="document.getElementById('content').innerText='Social Studies Homework'">Social Studies</button>
    <button onclick="document.getElementById('content').innerText='Economics Homework'">Economics</button>
    <button onclick="document.getElementById('content').innerText='Chat Coming Soon'">Chat</button>
  </nav>
  <section id="content">
    Choose a subject.
  </section>
  <section id="admin" style="display:none;">
    <h3>Admin Panel</h3>
    <p>Here admin can manage users and homework.</p>
  </section>
</body>
</html>